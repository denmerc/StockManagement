var Category;(function(n){var t=function(){function t(i,r){t.service==null&&(t.service=new n.Service(r)),t.scope==null&&(t.scope=i),this.SetupScope(i),t.GetAll()}return t.service=null,t.scope=null,t.Create=function(n){return t.service.Create(n,function(n){t.scope.CategoriesList.add(n),t.scope.Category=null,t.scope.OperationResultMessage=new OperationResultMessage("Success","Category saved",ResultMessageTypes.Success)},function(){t.scope.OperationResultMessage=new OperationResultMessage("Oops","Failed to save new category",ResultMessageTypes.Error)})},t.GetAll=function(){return t.service.GetAll(null,function(n){t.scope.CategoriesList=n},function(n){t.scope.OperationResultMessage=new OperationResultMessage("Oops","Failed to retrieve categories",ResultMessageTypes.Error),console.log("Failed to get all categories, reason: ",n)})},t.Get=function(n){return t.service.Get(n,function(){},function(){})},t.Update=function(n){return t.service.Update(n,function(){t.scope.OperationResultMessage=new OperationResultMessage("Success","Category updated",ResultMessageTypes.Success)},function(n){t.scope.OperationResultMessage=new OperationResultMessage("Oops!","Failed to update category",ResultMessageTypes.Error),console.log(n)})},t.Delete=function(n){t.service.Delete(n,function(){console.log("deleted",n),t.scope.CategoriesList.remove(function(t){return t.Id==n.Id}),t.scope.Category=null,t.scope.OperationResultMessage=new OperationResultMessage("Success","Category deleted",ResultMessageTypes.Success)},function(i){t.scope.OperationResultMessage=new OperationResultMessage("Oops!","Failed to delete category",ResultMessageTypes.Error),console.log("Failed to delete",n,i)})},t.prototype.SetupScope=function(n){n.Labels={},n.Labels.btnSave="Create",n.OperationResultMessage=null,n.$watch(function(n){return n.Category},function(n,t,i){i.Labels.btnSave=i.Category&&i.Category.Id?"Update":"Create"}),n.SelectCategoryForUpdate=function(t){console.log("setting category for update",t),n.Category=t},n.btnSave_Click=function(){n.Category.Id!=null?t.Update(n.Category):t.Create(n.Category)},n.btnDelete_Click=function(){t.Delete(n.Category)},n.btnClear_Click=function(){n.Category=null}},t}();n.Controller=t})(Category||(Category={}))